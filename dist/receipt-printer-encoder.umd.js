!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ReceiptPrinterEncoder=t()}(this,function(){"use strict";const e={ascii:{name:"ASCII",languages:["en"],value:new Array(256).fill(1,0,128).map((e,t)=>t)},cp437:{name:"USA, Standard Europe",languages:["en"],extends:"ascii",value:[[,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788],[9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660],,,,,,[,,,,,,,,,,,,,,,8962],[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197],[201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402],[225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],[9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488],[9492,9524,9516,9500,9472,9532,9566,9567,9562,9556,9577,9574,9568,9552,9580,9575],[9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]]},cp720:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[65533,65533,,,65533,,65533,,,,,,,65533,65533,65533],[65533,1617,1618,,164,1600,,,1569,1570,1571,1572,,1573,1574,1575],[1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,,,],,,,[1590,1591,1592,1593,1594,1601,,1602,1603,1604,1605,1606,1607,1608,1609,1610],[,1611,1612,1613,1614,1615,1616,,,,,,,,,,]]},cp737:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928],[929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952],[953,954,955,956,957,958,959,960,961,963,962,964,965,966,967,968],,,,[969,940,941,942,970,943,972,973,971,974,902,904,905,906,908,910],[911,,,,938,939,,,,,,,,,,,]]},cp771:{name:"Lithuanian KBL",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,,,[,,,,,,,,,,,,260,261,268,269],,[280,281,278,279,302,303,352,353,370,371,362,363,381,382,,,]]},cp772:{name:"Lithuanian LST 1284",languages:["lt"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],,[,,8805,8804,8222,8220,247,8776,,,,,8319,178,,,]]},cp774:{name:"Lithuanian LST 1283",languages:["lt"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[,946,,,,,,,,,,,,,,8898],[,,,,8222,8220,,,,,729,,,,,,]]},cp775:{name:"Baltic Rim",languages:["et","lt"],extends:"cp437",value:[,,,,,,,,[262,,,257,,291,,263,322,275,342,343,299,377,,,],[,,,333,,290,162,346,347,,,248,,216,215,164],[256,298,,379,380,378,8221,166,169,174,,,,321,,,],[,,,,,260,268,280,278,,,,,302,352,,],[,,,,,,370,362,,,,,,,,381],[261,269,281,279,303,353,371,363,382,,,,,,,,],[211,,332,323,245,213,,324,310,311,315,316,326,274,325,8217],[173,,8220,190,182,167,,8222,,,,185,179,,,,]]},cp850:{name:"Multilingual",languages:["en"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,215,,],[,,,,,,,,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[240,208,202,203,200,305,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,254,222,218,219,217,253,221,175,180],[173,,8215,190,182,167,,184,,168,,185,179,,,,]]},cp851:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[,,,,,,902,,,,,,,904,,905],[906,65533,908,,,910,,,911,,,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,180],[173,,965,966,967,167,968,184,,168,969,971,944,974,,,]]},cp852:{name:"Latin 2",languages:["hu","pl","cz"],extends:"cp850",value:[,,,,,,,,[,,,,,367,263,,322,,336,337,,377,,262],[,313,314,,,317,318,346,347,,,356,357,321,,269],[,,,,260,261,381,382,280,281,,378,268,351,,,],[,,,,,,,282,350,,,,,379,380,,],[,,,,,,258,259,,,,,,,,,],[273,272,270,,271,327,,,283,,,,,354,366,,],[,,,323,324,328,352,353,340,,341,368,,,355,,],[,733,731,711,728,,,,,,729,369,344,345,,,]]},cp853:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,265,,,,,,,,,264],[,267,266,,,,,,304,,,285,,284,215,309],[,,,,,,286,287,292,293,65533,,308,351,,,],[,,,,,193,194,192,350,,,,,379,380,,],[,,,,,,348,349,,,,,,,,164],[65533,65533,202,203,200,305,205,206,207,,,,,65533,204,,],[211,,212,210,288,289,,294,295,218,219,217,364,365,65533,180],[173,65533,8467,329,728,167,,184,,168,729,65533,179,,,,]]},cp855:{name:"Cyrillic",languages:["bg"],extends:"cp437",value:[,,,,,,,,[1106,1026,1107,1027,1105,1025,1108,1028,1109,1029,1110,1030,1111,1031,1112,1032],[1113,1033,1114,1034,1115,1035,1116,1036,1118,1038,1119,1039,1102,1070,1098,1066],[1072,1040,1073,1041,1094,1062,1076,1044,1077,1045,1092,1060,1075,1043,,,],[,,,,,1093,1061,1080,1048,,,,,1081,1049,,],[,,,,,,1082,1050,,,,,,,,164],[1083,1051,1084,1052,1085,1053,1086,1054,1087,,,,,1055,1103,,],[1071,1088,1056,1089,1057,1090,1058,1091,1059,1078,1046,1074,1042,1100,1068,8470],[173,1099,1067,1079,1047,1096,1064,1101,1069,1097,1065,1095,1063,167,,,]]},cp857:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,248,,216,350,351],[,,,,,,286,287,,174,,,,,,,],[,,,,,193,194,192,169,,,,,162,165,,],[,,,,,,227,195,,,,,,,,164],[186,170,202,203,200,8364,205,206,207,,,,,166,204,,],[211,,212,210,245,213,,65533,215,218,219,217,236,255,175,180],[173,,65533,190,182,167,,184,,168,,185,179,,,,]]},cp858:{name:"Euro",languages:["en"],extends:"cp850",value:[,,,,,,,,,,,,,[,,,,,8364,,,,,,,,,,,],,,]},cp860:{name:"Portuguese",languages:["pt"],extends:"cp437",value:[,,,,,,,,[,,,,227,,193,,,202,,205,212,,195,194],[,192,200,,245,,218,,204,213,,,,217,,211],[,,,,,,,,,210,,,,,,,],,,,,,]},cp861:{name:"Icelandic",languages:["is"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,208,240,222,,,],[,,,,,254,,221,253,,,248,,216,,,],[,,,,193,205,211,218,,,,,,,,,],,,,,,]},cp862:{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},cp863:{name:"Canadian French",languages:["fr"],extends:"cp437",value:[,,,,,,,,[,,,,194,,182,,,,,,,8215,192,167],[,200,202,,203,207,,,164,212,,,,217,219,,],[166,180,,,168,184,179,175,206,,,,,190,,,],,,,,,]},cp864:{name:"Arabic",languages:["ar"],extends:"cp437",offset:128,value:[176,183,8729,8730,9618,9472,9474,9532,9508,9516,9500,9524,9488,9484,9492,9496,946,8734,966,177,189,188,8776,171,187,65271,65272,65533,65533,65275,65276,65533,160,173,65154,163,164,65156,65533,65533,65166,65167,65173,65177,1548,65181,65185,65189,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65233,1563,65201,65205,65209,1567,162,65152,65153,65155,65157,65226,65163,65165,65169,65171,65175,65179,65183,65187,65191,65193,65195,65197,65199,65203,65207,65211,65215,65217,65221,65227,65231,166,172,247,215,65225,1600,65235,65239,65243,65247,65251,65255,65259,65261,65263,65267,65213,65228,65230,65229,65249,65149,1617,65253,65257,65260,65264,65266,65232,65237,65269,65270,65245,65241,65265,9632,65533]},cp865:{name:"Nordic",languages:["sv","dk"],extends:"cp437",value:[,,,,,,,,,[,,,,,,,,,,,248,,216,,,],[,,,,,,,,,,,,,,,164],,,,,,]},cp866:{name:"Cyrillic 2",languages:["ru"],extends:"cp437",value:[,,,,,,,,[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[1025,1105,1028,1108,1031,1111,1038,1118,,,,,8470,164,,,]]},cp869:{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,902,65533,183,172,166,8216,8217,904,8213,905],[906,938,908,65533,65533,910,939,169,911,178,179,940,,941,942,943],[970,912,972,973,913,914,915,916,917,918,919,,920,921,,,],[,,,,,922,923,924,925,,,,,926,927,,],[,,,,,,928,929,,,,,,,,931],[932,933,934,935,936,937,945,946,947,,,,,948,949,,],[950,951,952,953,954,955,956,957,958,959,960,961,963,962,964,900],[173,,965,966,967,167,968,901,,168,969,971,944,974,,,]]},cp874:{name:"Thai",languages:["th"],extends:"ascii",offset:128,value:[8364,65533,65533,65533,65533,8230,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,8216,8217,8220,8221,8226,8211,8212,65533,65533,65533,65533,65533,65533,65533,65533,160,3585,3586,3587,3588,3589,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601,3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622,3623,3624,3625,3626,3627,3628,3629,3630,3631,3632,3633,3634,3635,3636,3637,3638,3639,3640,3641,3642,65533,65533,65533,65533,3647,3648,3649,3650,3651,3652,3653,3654,3655,3656,3657,3658,3659,3660,3661,3662,3663,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,65533,65533,65533,65533]},cp1001:{name:"Arabic",languages:["ar"],extends:"cp437",value:[,,,,,,,,[1569,1570,1571,1572,1573,65163,1575,1576,65169,1577,1578,65175,1579,65179,1583,1584],[1585,1586,1587,65203,65204,1588,65207,65208,1589,65211,65212,1590,65215,65216,1591,1592],[1593,65227,1594,65231,1601,65235,1602,65239,1603,1705,1604,65271,65273,65275,9496,1605],[65251,1606,65255,1607,65259,1608,1609,1657,65267,9474,1548,1563,1567,65154,65156,65162],[,1580,65183,1581,65187,1582,65191,65226,65228,65230,65231,65272,65274,65276,65259,65260],[1632,65264,9472,65533,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,65533,65533],[65533,65533,65275,65533,65533,65533,65533,9524,,,,,,,,,],,]},cp1098:{name:"Farsi",languages:["fa"],extends:"cp437",value:[,,[,,,,,65533,,,,,65533,,,,,,],,,,,,[65533,65533,1548,1563,1567,1611,1570,65154,63738,1575,65166,63739,1569,1571,65156,63737],[1572,65163,1576,65169,64342,64344,1578,65175,1579,65179,1580,65183,64378,64380,215,1581],[65187,1582,65191,1583,1584,1585,1586,64394,1587,65203,1588,65207,1589,65211,,,],[,,,,,1590,65215,65217,65219,,,,,164,65221,,],[,,,,,,65223,1593,,,,,,,,65533],[65226,65227,65228,1594,65230,65231,65232,1601,65235,,,,,1602,65239,,],[64398,65243,64402,64404,1604,65247,1605,65251,1606,65255,1608,1607,65259,65260,64420,64508],[173,64509,64510,1600,1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,,,]]},cp1125:{name:"Ukrainian",languages:["uk"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,1168,1169,1028,1108,1030,1110,1031,1111,247,177,,,,,]]},cp3001:{name:"Estonian 1 or 1116",languages:["et"],extends:"cp850",value:[,,,,,,,,,,,,,[353,352,,,,,,,,,,,,,,,],[,,,,,,,382,381,,,,,,,,],,]},cp3002:{name:"Estonian 2",languages:["et"],extends:"iso8859-1",value:[,,,,,,,,[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533],[32,,,,,,,,,,,,,,,8254],,,[352,,,,,,,,,,,,,,381,,],,[353,,,,,,,,,,,,,,382,,]]},cp3011:{name:"Latvian 1",languages:["lv"],extends:"cp437",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,,,,325,353,,,]]},cp3012:{name:"Latvian 2 (modified 866)",languages:["lv"],extends:"cp866",value:[,,,,,,,,,,,[,,,,,256,,326,,,,,,332,,,],[,,,,,,257,,,,,,,,,,],[352,,269,268,,,291,298,299,,,,,363,362,,],,[274,275,290,311,310,316,315,382,381,333,,,325,353,,,]]},cp3021:{name:"Bulgarian (MIK)",languages:["bg"],extends:"cp866",value:[,,,,,,,,,,,[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103],[,,,,,,9571,9553,,,,,,,,9488],[9617,9618,9619,9474,9508,8470,167,9559,9565,,,,,,,,],[945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745],[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3041:{name:"Maltese ISO 646",languages:["mt"],extends:"ascii",value:[,,,,,[,,,,,,,,,,,289,380,295,,,],[267,,,,,,,,,,,,,,,,],[,,,,,,,,,,,288,379,294,266,,],,,,,,,,,]},cp3840:{name:"Russian (modified 866)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[8801,177,8805,8804,8992,8993,247,8776,,,,,8319,178,,,]]},cp3841:{name:"Ghost",languages:["ru"],extends:"cp437",offset:128,value:[1171,1241,1105,1110,1111,1112,1181,1257,1118,1199,1277,1224,1209,1207,1108,163,1170,1240,1025,1030,1031,1032,1180,1256,1038,1198,1276,1223,1208,1206,1028,1066,32,33,34,35,164,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,1102,1072,1073,1094,1076,1077,1092,1075,1093,1080,1081,1082,1083,1084,1085,1086,1087,1103,1088,1089,1090,1091,1078,1074,1100,1099,1079,1096,1101,1097,1095,1098,1070,1040,1041,1062,1044,1045,1060,1043,1061,1048,1049,1050,1051,1052,1053,1054,1055,1071,1056,1057,1058,1059,1046,1042,1068,1067,1047,1064,1069,1065,1063,8709]},cp3843:{name:"Polish (Mazovia)",languages:["pl"],extends:"cp437",value:[,,,,,,,,[,,,,,,261,,,,,,,263,,260],[280,281,322,,,262,,,346,,,,321,,347,,],[377,379,,211,324,323,378,380,,,,,,,,,],,,,,,]},cp3844:{name:"Czech (Kamenický)",languages:["cz"],extends:"cp437",value:[,,,,,,,,[268,,,271,,270,356,269,283,282,313,205,318,314,,193],[,382,381,,,211,367,218,253,,,352,317,221,344,357],[,,,,328,327,366,212,353,345,341,340,,167,,,],,,,,,]},cp3845:{name:"Hungarian (CWI-2)",languages:["hu"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,205,,193],[,,,337,,211,369,218,368,,,,,,,,],[,,,,,,,336,,,,,,,,,],,,,,,]},cp3846:{name:"Turkish",languages:["tr"],extends:"cp437",value:[,,,,,,,,[,,,,,,,,,,,,,305,,,],[,,,,,,,,304,,,,,,350,351],[,,,,,,286,287,,,,,,,,,],,,,,,]},cp3847:{name:"Brazil ABNT",languages:["pt"],extends:"iso8859-1",value:[,,,,,,,,,,,,,[,,,,,,,65533,,,,,,,,,],,[,,,,,,,65533,,,,,,,,,]]},cp3848:{name:"Brazil ABICOMP",languages:["pt"],extends:"ascii",value:[,,,,,,,,,,[160,192,193,194,195,196,199,200,201,202,203,204,205,206,205,209],[210,211,212,213,214,198,217,218,219,220,376,168,163,166,167,176],[161,224,225,226,227,228,231,232,233,234,235,236,237,238,239,241],[242,243,244,245,246,230,249,250,251,252,255,223,170,186,191,177],,,]},"iso8859-1":{name:"Latin 1",languages:["en"],extends:"ascii",offset:128,value:[128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},"iso8859-2":{name:"Latin 2",languages:["hu","pl","cz"],extends:"iso8859-1",value:[,,,,,,,,,,[,260,728,321,,317,346,,,352,350,356,377,,381,379],[,261,731,322,,318,347,711,,353,351,357,378,733,382,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},"iso8859-7":{name:"Greek",languages:["el"],extends:"iso8859-1",value:[,,,,,,,,,,[,8216,8217,,8364,8367,,,,,890,,,,,8213],[,,,,900,901,902,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,,]]},"iso8859-15":{name:"Latin 9",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,,,[,,,,8364,,352,,353,,,,,,,,],[,,,,381,,,,382,,,,338,339,376,,],,,,,]},windows1250:{name:"Latin 2",languages:["hu","pl","cz"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,,,346,356,,377],[,,,,,,,,65533,,,,347,357,,378],[,711,728,321,,260,,,,,350,,,,,379],[,,731,322,,,,,,261,351,,317,733,318,380],[340,,,258,,313,262,,268,,280,,282,,,270],[272,323,327,,,336,,,344,366,,368,,,354,,],[341,,,259,,314,263,,269,,281,,283,,,271],[273,324,328,,,337,,,345,367,,369,,,355,729]]},windows1251:{name:"Cyrillic",languages:["ru"],extends:"windows1252",value:[,,,,,,,,[1026,1027,,1107,,,,,8364,,1033,,1034,1036,1035,1039],[1106,,,,,,,,65533,,1113,,1114,1116,1115,1119],[,1038,1118,1032,,1168,,,1025,,1028,,,,,1031],[,,1030,1110,1169,,,,1105,8470,1108,,1112,1029,1109,1111],[1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055],[1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071],[1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087],[1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103]]},windows1252:{name:"Latin",languages:["fr"],extends:"iso8859-1",value:[,,,,,,,,[8364,65533,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,65533,381,65533],[65533,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,65533,382,376],,,,,,,]},windows1253:{name:"Greek",languages:["el"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,65533,,65533,,65533,,65533,,],[,,,,,,,,65533,,65533,,65533,,65533,65533],[,901,902,,,,,,,,65533,,,,,8213],[,,,,900,,,,904,905,906,,908,,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},windows1254:{name:"Turkish",languages:["tr"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,,,,,65533,,],[,,,,,,,,,,,,,,65533,,],,,,[286,,,,,,,,,,,,,304,350,,],,[287,,,,,,,,,,,,,305,351,,]]},windows1255:{name:"Hebrew",languages:["he"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,65533,,65533,,],[,,,,,,,,,,65533,,65533,,65533,65533],[,,,,8362,,,,,,215,,,,,,],[,,,,,,,,,,247,,,,,,],[1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,65533,1467,1468,1469,1470,1471],[1472,1473,1474,1475,1520,1521,1522,1523,1524,65533,65533,65533,65533,65533,65533,65533],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,65533,65533,8206,8207,65533]]},windows1256:{name:"Arabic",languages:["ar"],extends:"windows1252",value:[,,,,,,,,[,1662,,,,,,,,,1657,,,1670,1688,1672],[1711,,,,,,,,1705,,1681,,,8204,8205,1722],[,1548,,,,,,,,,1726,,,,,,],[,,,,,,,,,,1563,,,,,1567],[1729,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583],[1584,1585,1586,1587,1588,1589,1590,,1591,1592,1593,1594,1600,1601,1602,1603],[,1604,,1605,1606,1607,1608,,,,,,1609,1610,,,],[1611,1612,1613,1614,,1615,1616,,1617,,1618,,,8206,8207,1746]]},windows1257:{name:"Baltic Rim",languages:["et","lt"],extends:"windows1252",value:[,,,,,,,,[,,,65533,,,,,65533,,65533,,65533,168,711,184],[,,,,,,,,65533,,65533,,65533,175,731,65533],[,65533,,,,65533,,,216,,342,,,,,198],[,,,,,,,,248,,343,,,,,230],[260,302,256,262,,,280,274,268,,377,278,290,310,298,315],[352,323,325,,332,,,,370,321,346,362,,379,381,,],[261,303,257,263,,,281,275,269,,378,279,291,311,299,316],[353,324,326,,333,,,,371,322,347,363,,380,382,729]]},windows1258:{name:"Vietnamese",languages:["vi"],extends:"windows1252",value:[,,,,,,,,[,,,,,,,,,,65533,,,,65533,,],[,,,,,,,,,,65533,,,,65533,,],,,[,,,258,,,,,,,,,768,,,,],[272,,777,,,416,,,,,,,,431,771,,],[,,,259,,,,,,,,,769,,,,],[273,,803,,,417,,,,,,,,432,8363,,]]},rk1048:{name:"Kazakh",languages:["kk"],extends:"windows1251",value:[,,,,,,,,[,,,,,,,,,,,,,1178,1210,,],[,,,,,,,,,,,,,1179,1211,,],[,1200,1201,1240,,1256,,,,,1170,,,,,1198],[,,,,1257,,,,,,1171,,1241,1186,1187,1199],,,,,]},thai11:{name:"Thai (Charcter Code 11)",languages:["th"],extends:"thai13",value:[,,,,,,,,,[,,,,,,,,,9484,9488,9492,9496,9474,9500,9508],,,,[,,,,,,,,,,,9472,9524,9516,9532,,],,[,,,,,,,,,,,3658,3650,3651,3652,65533]]},thai13:{name:"Thai (Charcter Code 13)",languages:["th"],extends:"cp874",value:[,,,,,,,,[65533,,,,,65533,,,,,,,,,,,],[,65533,65533,65533,65533,65533,65533,65533,,,,,,,,,],,,,[,,,,,,,,,,,3619,,,3648,,],,[,,,,,,,,,,,,8592,8593,8594,8595]]},thai14:{name:"Thai (Charcter Code 14)",languages:["th"],extends:"cp874",value:[,,,,,,,,[9484,9488,9492,9496,9474,9472,9500,9508,9524,9516,9532,9608,,,,,],[3619,3634,65533,3632,65533,65533,65533,65533,,,,,,,,3648],,,,,,[,,,,,,,,,,3675,65533,,,,3652]]},thai16:{name:"Thai (Charcter Code 16)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3650,3651,,,,,,,,,,,,,,,],,,,,,,]},thai18:{name:"Thai (Charcter Code 18)",languages:["th"],extends:"thai14",value:[,,,,,,,,[,,,,,,,,,,,,8592,8593,8594,8595],,,,,,[,,,,,,,,,,,,,,3652,,],[,,,,,,,,,,,,,,,65533]]},thai42:{name:"Thai (Charcter Code 42)",languages:["th"],extends:"thai18",value:[,,,,,,,,,[3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3587,3589,3619,3634,3652,,],[,,,3588,3590,3591,3592,3593,3594,3595,3596,3597,3598,3599,3600,3601],[3602,3603,3604,3605,3606,3607,3608,3609,3610,3611,3612,3613,3614,3615,3616,3617],[3618,3619,3620,3621,3623,3624,3625,3626,3627,3628,3629,3630,3632,3622,3634,3635],[3648,3649,3650,3651,3652,3654,3631,3640,3641,3636,3637,3638,3639,3658,3661,3655],[3656,3657,3658,3659,3660,65533,65533,65533,65533,65533,65533,3632,65533,65533,65533,65533],[65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,65533,,,,,160]]},tcvn3:{name:"Vietnamese (VSCII3 / TCVN3)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,,,,,,,,259,226,234,244,417,432,273,,],[,,,,,224,7843,227,225,7841,,7857,7859,7861,7855,,],[,,,,,,7863,7847,7849,7851,7845,7853,232,,7867,7869],[233,7865,7873,7875,7877,7871,7879,236,7881,,,,297,237,7883,242],[,7887,245,243,7885,7891,7893,7895,7889,7897,7901,7903,7905,7899,7907,249],[,7911,361,250,7909,7915,7917,7919,7913,7921,7923,7927,7929,253,7925,,]]},tcvn3capitals:{name:"Vietnamese (VSCII3 / TCVN3 Capitals)",languages:["vi"],extends:"ascii",value:[,,,,,,,,,,[,258,194,,,,,208,,,202,212,416,431,,,],[,,,,,192,7842,195,193,7840,,7856,7858,7860,7854,,],[,,,,,,7862,7846,7848,7850,7844,7852,200,,7866,7868],[201,7864,7872,7874,7876,7870,7878,204,7880,,,,296,205,7882,210],[,7886,213,211,7884,7890,7892,7894,7888,7896,7900,7902,7904,7898,7906,217],[,7910,360,218,7908,7914,7916,7918,7912,7920,7922,7926,7928,221,7924,,]]},viscii:{name:"Vietnamese (VISCII)",languages:["vi"],extends:"ascii",value:[[,,7858,,,7860,7850,,,,,,,,,,],[,,,,7926,,,,,7928,,,,,7924,,],,,,,,,[7840,7854,7856,7862,7844,7846,7848,7852,7868,7864,7870,7872,7874,7876,7878,7888],[7890,7892,7894,7896,7906,7898,7900,7902,7882,7886,7884,7880,7910,360,7908,7922],[213,7855,7857,7863,7845,7847,7849,7853,7869,7865,7871,7873,7875,7877,7879,7889],[7891,7893,7895,7904,416,7897,7901,7903,7883,7920,7912,7914,7916,417,7899,431],[192,193,194,195,7842,258,7859,7861,200,201,202,7866,204,205,296,7923],[272,7913,210,211,212,7841,7927,7915,7917,217,218,7929,7925,221,7905,432],[224,225,226,227,7843,259,7919,7851,232,233,234,7867,236,237,297,7881],[273,7921,242,243,244,245,7887,7885,7909,249,250,361,7911,253,7907,7918]]},khmer:{name:"Khmer",languages:["km"],extends:"ascii",value:[,,,,,,,,[6016,6017,6016,6019,6020,6021,6022,6023,6024,6025,6026,6027,6028,6029,6030,6031],[6032,6033,6032,6035,6036,6037,6038,6039,6040,6041,6042,6043,6044,6045,6046,6047],[6048,6049,6048,6051,6052,6053,6054,6055,6056,6057,6058,6059,6060,6061,6062,6063],[6064,6065,6064,6067,6068,6069,6070,6071,6072,6073,6074,6075,6076,6077,6078,6079],[6080,6081,6080,6083,6084,6085,6086,6087,6088,6089,6090,6091,6092,6093,6094,6095],[6096,6097,6096,6099,6100,6101,6102,6103,6104,6105,6106,6107,6108,6109,,,],[6112,6113,6112,6115,6116,6117,6118,6119,6120,6121,,,,,,,],[6128,6129,6128,6131,6132,6133,6134,,,,,,,,,,]]},latvian:{name:"Latvian (based on cp3012)",languages:["lv"],extends:"cp3012",value:[,,,,,,,,,,,,,[,,,,298,299,,,,,,,,,,,],,,]},"epson/katakana":{name:"Katakana",languages:["ja"],extends:"cp437",offset:128,value:[9601,9602,9603,9604,9605,9606,9607,9608,9615,9614,9613,9612,9611,9610,9609,9532,9524,9516,9508,9500,9620,9472,9474,9621,9484,9488,9492,9496,9581,9582,9584,9583,32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391,65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407,65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423,65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439,9552,9566,9578,9569,9698,9699,9701,9700,9824,9829,9830,9827,9679,9675,9585,9586,9587,20870,24180,26376,26085,26178,20998,31186,12306,24066,21306,30010,26449,20154,9618,160]},"epson/iso8859-2":{name:"Latin 2 modified with box drawing characters",languages:["hu","pl","cz"],extends:"iso8859-2",value:[,,,,,,,,[9617,9618,9619,9474,9508,9496,9484,9608,169,9571,9553,9559,9565,162,165,9488],[9492,9524,9516,9500,9472,9532,9604,9600,9562,9556,9577,9574,9568,9552,9580,174],,,,,,,]},"star/standard":{name:"Standard",languages:["en"],extends:"cp437",offset:128,value:[160,129904,129910,129905,129911,129906,129912,129907,129913,129908,129914,129909,9500,129915,129916,129918,129919,129917,9624,9623,9622,9629,9585,9586,9701,9700,9484,9524,9516,9508,9830,9587,196,214,220,223,167,170,186,65533,162,189,65533,65533,165,188,256,235,233,232,275,234,239,237,236,299,238,246,243,242,333,244,252,250,249,363,251,231,191,65533,65533,274,8580,161,197,248,216,228,225,224,257,226,176,8451,8457,937,181,931,963,65533,65533,967,8734,177,247,960,9612,9604,9600,9616,9532,9496,9492,9488,9608,9618,9162,8592,8593,8594,8595,9581,9161,129923,65533,9601,9613,65533,129928,9626,9630,9698,9699,129840,9208,9584,9583,9582]},"star/katakana":{name:"Katakana",languages:["ja"],extends:"star/standard",value:[,,,,,,,,,,[32,65377,65378,65379,65380,65381,65382,65383,65384,65385,65386,65387,65388,65389,65390,65391],[65392,65393,65394,65395,65396,65397,65398,65399,65400,65401,65402,65403,65404,65405,65406,65407],[65408,65409,65410,65411,65412,65413,65414,65415,65416,65417,65418,65419,65420,65421,65422,65423],[65424,65425,65426,65427,65428,65429,65430,65431,65432,65433,65434,65435,65436,65437,65438,65439],,,]},"star/cp874":{name:"Thai",languages:["th"],extends:"cp874",value:[,,,,,,,,,[,,,,,9474,9472,9532,9484,9488,9492,9496,9500,9516,9508,9524],,,,[,,,,,,,,,,,3657,3658,3659,3660,,],,[,,,,,,,,,,,,162,172,166,,]]},"star/cp928":{name:"Greek",languages:["el"],extends:"cp437",value:[,,,,,,,,,,[160,8216,8217,163,65533,65533,166,167,168,169,65533,171,172,173,65533,8213],[176,177,178,179,900,901,902,183,904,905,906,187,908,189,910,911],[912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927],[928,929,65533,931,932,933,934,935,936,937,938,939,940,941,942,943],[944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959],[960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,65533]]},"bixolon/cp866":{name:"Cyrillic 2 (modified with euro sign)",languages:["ru"],extends:"cp866",value:[,,,,,,,,,,,,,,,[,,,,9093,1055,8801,9824,8364,,,,,,,,]]},"bixolon/hebrew":{name:"Hebrew",languages:["he"],extends:"cp437",value:[,,,,,,,,,,[32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47],[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63],[64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79],[80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95],[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,123,124,125,126,,]]},"xprinter/hebrew":{name:"Hebrew (based on CP862 minus CP437)",languages:["he"],extends:"ascii",value:[,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,],,,,,,,]},"pos8360/hebrew":{name:"Hebrew (based on cp862 with repeated characters)",languages:["he"],extends:"cp862",value:[,,,,,,,,,,,,,,[1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503],[1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,,,,,,]]}},t={cp2001:"cp771",cp1119:"cp772",cp1118:"cp774",cp1162:"cp874",iso88591:"iso8859-1",iso88592:"iso8859-2",iso88597:"iso8859-7",iso885915:"iso8859-15",shiftjis:"epson/katakana",katakana:"epson/katakana",cp928:"star/cp928"},s={en:"The quick brown fox jumps over the lazy dog.",jp:"イロハニホヘト チリヌルヲ ワカヨタレソ ツネナラム",pt:"O próximo vôo à noite sobre o Atlântico, põe freqüentemente o único médico.",fr:"Les naïfs ægithales hâtifs pondant à Noël où il gèle sont sûrs d'être déçus en voyant leurs drôles d'œufs abîmés.",sv:"Flygande bäckasiner söka strax hwila på mjuka tuvor.",dk:"Quizdeltagerne spiste jordbær med fløde",el:"ξεσκεπάζω την ψυχοφθόρα βδελυγμία",tr:"Pijamalı hasta, yağız şoföre çabucak güvendi.",ru:"Съешь же ещё этих мягких французских булок да выпей чаю",hu:"Árvíztűrő tükörfúrógép",pl:"Pchnąć w tę łódź jeża lub ośm skrzyń fig",cz:"Mohu jíst sklo, neublíží mi.",ar:"أنا قادر على أكل الزجاج و هذا لا يؤلمني.",et:"Ma võin klaasi süüa, see ei tee mulle midagi.",lt:"Aš galiu valgyti stiklą ir jis manęs nežeidžia.",bg:"Мога да ям стъкло, то не ми вреди.",is:"Ég get etið gler án þess að meiða mig.",he:"אני יכול לאכול זכוכית וזה לא מזיק לי.",fa:".من می توانم بدونِ احساس درد شيشه بخورم",uk:"Я можу їсти скло, і воно мені не зашкодить.",vi:"Tôi có thể ăn thủy tinh mà không hại gì.",kk:"қазақша",lv:"Es varu ēst stiklu, tas man nekaitē.",mt:"Nista' niekol il-ħġieġ u ma jagħmilli xejn.",th:"ฉันกินกระจกได้ แต่มันไม่ทำให้ฉันเจ็บ"};class o{static getEncodings(){return Object.keys(e)}static getEncoding(s){return void 0!==t[s]&&(s=t[s]),void 0===e[s]&&(s="ascii"),void 0===e[s].codepoints&&(e[s].codepoints=this.getCodepoints(s,!0)),structuredClone(e[s])}static getTestStrings(o){return void 0!==t[o]&&(o=t[o]),void 0!==e[o]&&void 0!==e[o].languages?e[o].languages.map(e=>({language:e,string:s[e]})):[]}static supports(s){return void 0!==t[s]&&(s=t[s]),void 0!==e[s]}static encode(e,t){const s=new Uint8Array(e.length),o=this.getEncoding(t);for(let t=0;t<e.length;t++){const a=e.codePointAt(t),i=o.codepoints.findIndex(e=>e===a);s[t]=-1!==i?i:63}return s}static autoEncode(e,t){const s=[];let o,a=-1;for(let i=0;i<e.length;i++){const n=e.codePointAt(i);let r,p=0;if(!r&&o){const e=this.getEncoding(o).codepoints.findIndex(e=>e===n);-1!==e&&(r=o,p=e)}if(!r)for(let e=0;e<t.length;e++){const s=this.getEncoding(t[e]).codepoints.findIndex(e=>e===n);if(-1!==s){r=t[e],p=s;break}}r||(r=o||t[0],p=63),o!=r&&(o&&(s[a].bytes=new Uint8Array(s[a].bytes)),a++,s[a]={codepage:r,bytes:[]},o=r),s[a].bytes.push(p)}return o&&(s[a].bytes=new Uint8Array(s[a].bytes)),s}static getCodepoints(t,s){let o=new Array(256);if(s&&(o=void 0===e[t].extends?o.fill(65533):this.getEncoding(e[t].extends).codepoints),16===e[t].value.length){for(let s=0;s<16;s++)if("object"==typeof e[t].value[s])for(let a=0;a<16;a++)"number"==typeof e[t].value[s][a]&&(o[16*s+a]=e[t].value[s][a])}else{const s=e[t].offset||0;for(let a=0;a<e[t].value.length;a++)"number"==typeof e[t].value[a]&&(o[s+a]=e[t].value[a])}return o}}class a{#e=new Map;#t=10;#s=4194304;acquire(e){if(e>this.#s)return new Uint8Array(e);const t=this.#o(e),s=this.#e.get(t);return s&&s.length>0?s.pop():new Uint8Array(t)}release(e){if(e.length>this.#s)return;const t=e.length;let s=this.#e.get(t);s||(s=[],this.#e.set(t,s)),s.length<this.#t&&(e.fill(0),s.push(e))}clear(){this.#e.clear()}#o(e){return e<=0?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1)}}class i{static#a=new a;static DEFAULT_CHUNK_SIZE=512;static MAX_RLE_RUN=255;static validateImage(e){if(!e||"object"!=typeof e)throw new Error("ImageEncoder: image must be an object");if(!e.data)throw new Error("ImageEncoder: image.data is required");if("number"!=typeof e.width||e.width<=0)throw new Error("ImageEncoder: image.width must be a positive number");if("number"!=typeof e.height||e.height<=0)throw new Error("ImageEncoder: image.height must be a positive number");const t=e.width*e.height*4;if(e.data.length<t)throw new Error(`ImageEncoder: image.data length (${e.data.length}) is less than expected (${t})`)}static validateDimensions(e,t){if("number"!=typeof e||e<=0)throw new Error("ImageEncoder: width must be a positive number");if("number"!=typeof t||t<=0)throw new Error("ImageEncoder: height must be a positive number");if(e%8!=0)throw new Error("ImageEncoder: width must be a multiple of 8")}static getPixel(e,t,s,o,a){if(t<0||t>=o||s<0||s>=a)return 0;const i=4*(o*s+t);return e.data[i]>127?0:1}static pixelsToRaster(e,t,s){this.validateImage(e),this.validateDimensions(t,s);const o=t>>3,a=o*s,i=this.#a.acquire(a),n=i.length===a?i:i.subarray(0,a);n.fill(0);for(let a=0;a<s;a++){const i=a*o;for(let o=0;o<t;o+=8){let r=0;for(let i=0;i<8;i++)r|=this.getPixel(e,o+i,a,t,s)<<7-i;n[i+(o>>3)]=r}}return{data:n,widthBytes:o,height:s}}static IMAGE_STRIP_HEIGHT=512;static pixelsToRasterStrips(e,t,s,o=this.IMAGE_STRIP_HEIGHT){this.validateImage(e),this.validateDimensions(t,s);const a=t>>3,i=[],n=Math.ceil(s/o);for(let r=0;r<n;r++){const n=r*o,p=Math.min(o,s-n),d=a*p,c=this.#a.acquire(d),l=c.length===d?c:c.subarray(0,d);l.fill(0);for(let o=0;o<p;o++){const i=n+o,r=o*a;for(let o=0;o<t;o+=8){let a=0;for(let n=0;n<8;n++)a|=this.getPixel(e,o+n,i,t,s)<<7-n;l[r+(o>>3)]=a}}i.push({data:l,widthBytes:a,height:p})}return{strips:i,widthBytes:a,totalHeight:s}}static buildRasterCommandsFromStrips(e,t=!1){const s=[];for(const o of e){const e=this.buildRasterCommand(o.data,o.widthBytes,o.height,t);s.push(e.command)}return s}static pixelsToColumns(e,t,s){this.validateImage(e);const o=[],a=Math.ceil(s/24);for(let i=0;i<a;i++){const a=24*i,n=3*t,r=this.#a.acquire(n),p=r.length===n?r:r.subarray(0,n);p.fill(0);for(let o=0;o<t;o++){const i=3*o;for(let n=0;n<3;n++){let r=0;for(let i=0;i<8;i++)r|=this.getPixel(e,o,a+8*n+i,t,s)<<7-i;p[i+n]=r}}o.push(p)}return o}static compressRLE(e){if(!e||0===e.length)return{data:new Uint8Array(0),compressed:!1,originalSize:0,compressedSize:0,ratio:1};const t=2*e.length,s=this.#a.acquire(t);let o=0,a=0;for(;a<e.length;){const t=e[a];let i=1;for(;a+i<e.length&&e[a+i]===t&&i<this.MAX_RLE_RUN;)i++;if(i>=2)i>129&&(i=129),s[o++]=i-2+128,s[o++]=t,a+=i;else{const t=a;let i=0;for(;a<e.length&&i<128;){if(a+1<e.length&&e[a]===e[a+1]){let t=2;for(;a+t<e.length&&e[a+t]===e[a]&&t<3;)t++;if(t>=2)break}i++,a++}if(i>0){s[o++]=i-1;for(let a=0;a<i;a++)s[o++]=e[t+a]}}}const i=o;if(!(i<e.length))return this.#a.release(s),{data:new Uint8Array(e),compressed:!1,originalSize:e.length,compressedSize:e.length,ratio:1};const n=new Uint8Array(i);return n.set(s.subarray(0,i)),this.#a.release(s),{data:n,compressed:!0,originalSize:e.length,compressedSize:i,ratio:i/e.length}}static decompressRLE(e){if(!e||0===e.length)return new Uint8Array(0);const t=[];let s=0;for(;s<e.length;){const o=e[s++];if(o>=128){const a=o-128+2,i=e[s++],n=new Uint8Array(a);n.fill(i),t.push(n)}else{const a=o+1;t.push(e.slice(s,s+a)),s+=a}}const o=t.reduce((e,t)=>e+t.length,0),a=new Uint8Array(o);let i=0;for(const e of t)a.set(e,i),i+=e.length;return a}static*generateChunks(e,t=this.DEFAULT_CHUNK_SIZE){if(!e||0===e.length)return;if(t<=0)throw new Error("ImageEncoder: chunkSize must be positive");const s=e.length,o=Math.ceil(s/t);for(let a=0;a<o;a++){const i=a*t,n=Math.min(i+t,s),r=e.subarray(i,n);yield{chunk:r,index:a,total:o,isLast:a===o-1,byteOffset:i,totalBytes:s}}}static async*generateChunksAsync(e,t=this.DEFAULT_CHUNK_SIZE,s){if(!e||0===e.length)return;if(t<=0)throw new Error("ImageEncoder: chunkSize must be positive");const o=e.length,a=Math.ceil(o/t);for(let i=0;i<a;i++){const n=i*t,r=Math.min(n+t,o),p={chunk:e.subarray(n,r),index:i,total:a,isLast:i===a-1,byteOffset:n,totalBytes:o};s&&await s(p),yield p}}static concatenate(...e){const t=e.filter(e=>e&&e.length>0),s=t.reduce((e,t)=>e+t.length,0),o=new Uint8Array(s);let a=0;for(const e of t)o.set(e,a),a+=e.length;return o}static buildRasterCommand(e,t,s,o=!1){let a=e,i=!1,n=1;if(o){const t=this.compressRLE(e);t.compressed&&(a=t.data,i=!0,n=t.ratio)}const r=new Uint8Array([29,118,48,i?1:0,255&t,t>>8&255,255&s,s>>8&255]);return{command:this.concatenate(r,a),compressed:i,ratio:n}}static buildColumnCommand(e,t){const s=new Uint8Array([27,42,33,255&t,t>>8&255]),o=new Uint8Array([10]);return this.concatenate(s,e,o)}static buildLineSpacingCommand(e){return 0===e?new Uint8Array([27,50]):new Uint8Array([27,51,255&e])}static buildStarColumnCommand(e,t){const s=new Uint8Array([27,88,255&t,t>>8&255]),o=new Uint8Array([10,13]);return this.concatenate(s,e,o)}static releasePool(){this.#a.clear()}static async processImageAsync(e,t,s,o,a={}){const{useCompression:i=!1}=a;this.validateImage(e);const n=[];let r=!1;if("raster"===o){const o=t>>3,a=50,p=Math.ceil(s/a),d=this.#a.acquire(o*s);let c=0;for(let i=0;i<p;i++){const n=i*a,r=Math.min(n+a,s);for(let a=n;a<r;a++){const i=a*o;for(let o=0;o<t;o+=8){let n=0;for(let i=0;i<8;i++)n|=this.getPixel(e,o+i,a,t,s)<<7-i;d[i+(o>>3)]=n}c++,c%50==0&&await new Promise(e=>setTimeout(e,0))}}const l=d.subarray(0,o*s),u=this.buildRasterCommand(l,o,s,i);n.push(u.command),r=u.compressed,this.#a.release(d)}else{n.push(this.buildLineSpacingCommand(36));const o=Math.ceil(s/24);for(let a=0;a<o;a++){const o=24*a,i=new Uint8Array(3*t);for(let a=0;a<t;a++){const n=3*a;for(let r=0;r<3;r++){let p=0;for(let i=0;i<8;i++)p|=this.getPixel(e,a,o+8*r+i,t,s)<<7-i;i[n+r]=p}a%100==0&&a>0&&await new Promise(e=>setTimeout(e,0))}n.push(this.buildColumnCommand(i,t))}n.push(this.buildLineSpacingCommand(0))}return{commands:n,compressed:r}}}class n{initialize(){return[{type:"initialize",payload:[27,64]},{type:"character-mode",value:"single byte",payload:[28,46]},{type:"font",value:"A",payload:[27,77,0]}]}font(e){const t=e.charCodeAt(0)-65;return[{type:"font",value:e,payload:[27,77,t]}]}align(e){let t=0;return"center"===e?t=1:"right"===e&&(t=2),[{type:"align",value:e,payload:[27,97,t]}]}barcode(e,t,s){const a=[],i={upca:0,upce:1,ean13:2,ean8:3,code39:4,coda39:4,itf:5,"interleaved-2-of-5":5,"nw-7":6,codabar:6,code93:72,code128:73,"gs1-128":72,"gs1-databar-omni":75,"gs1-databar-truncated":76,"gs1-databar-limited":77,"gs1-databar-expanded":78,"code128-auto":79};if("string"==typeof t&&void 0===i[t])throw new Error(`Symbology '${t}' not supported by language`);if(s.width<1||s.width>3)throw new Error("Width must be between 1 and 3");let n=s.width+1;"itf"===t&&(n=2*s.width),"gs1-128"!==t&&"gs1-databar-omni"!==t&&"gs1-databar-truncated"!==t&&"gs1-databar-limited"!==t&&"gs1-databar-expanded"!==t||(n=s.width),a.push({type:"barcode",property:"height",value:s.height,payload:[29,104,s.height]},{type:"barcode",property:"width",value:s.width,payload:[29,119,n]},{type:"barcode",property:"text",value:s.text,payload:[29,72,s.text?2:0]}),"code128"!=t||e.startsWith("{")||(e="{B"+e),"gs1-128"==t&&(e=e.replace(/[()*]/g,""));const r=o.encode(e,"ascii"),p="string"==typeof t?i[t]:t;return p>64?a.push({type:"barcode",value:{symbology:t,data:e},payload:[29,107,p,r.length,...r]}):a.push({type:"barcode",value:{symbology:t,data:e},payload:[29,107,p,...r,0]}),a}qrcode(e,t){const s=[];if("number"==typeof t.model){const e={1:49,2:50};if(!(t.model in e))throw new Error("Model must be 1 or 2");s.push({type:"qrcode",property:"model",value:t.model,payload:[29,40,107,4,0,49,65,e[t.model],0]})}if("number"!=typeof t.size)throw new Error("Size must be a number");if(t.size<1||t.size>8)throw new Error("Size must be between 1 and 8");s.push({type:"qrcode",property:"size",value:t.size,payload:[29,40,107,3,0,49,67,t.size]});const a={l:48,m:49,q:50,h:51};if(!(t.errorlevel in a))throw new Error("Error level must be l, m, q or h");s.push({type:"qrcode",property:"errorlevel",value:t.errorlevel,payload:[29,40,107,3,0,49,69,a[t.errorlevel]]});const i=o.encode(e,"iso8859-1"),n=i.length+3;return s.push({type:"qrcode",property:"data",value:e,payload:[29,40,107,255&n,n>>8&255,49,80,48,...i]}),s.push({type:"qrcode",command:"print",payload:[29,40,107,3,0,49,81,48]}),s}pdf417(e,t){const s=[];if("number"!=typeof t.columns)throw new Error("Columns must be a number");if(0!==t.columns&&(t.columns<1||t.columns>30))throw new Error("Columns must be 0, or between 1 and 30");if(s.push({type:"pdf417",property:"columns",value:t.columns,payload:[29,40,107,3,0,48,65,t.columns]}),"number"!=typeof t.rows)throw new Error("Rows must be a number");if(0!==t.rows&&(t.rows<3||t.rows>90))throw new Error("Rows must be 0, or between 3 and 90");if(s.push({type:"pdf417",property:"rows",value:t.rows,payload:[29,40,107,3,0,48,66,t.rows]}),"number"!=typeof t.width)throw new Error("Width must be a number");if(t.width<2||t.width>8)throw new Error("Width must be between 2 and 8");if(s.push({type:"pdf417",property:"width",value:t.width,payload:[29,40,107,3,0,48,67,t.width]}),"number"!=typeof t.height)throw new Error("Height must be a number");if(t.height<2||t.height>8)throw new Error("Height must be between 2 and 8");if(s.push({type:"pdf417",property:"height",value:t.height,payload:[29,40,107,3,0,48,68,t.height]}),"number"!=typeof t.errorlevel)throw new Error("Errorlevel must be a number");if(t.errorlevel<0||t.errorlevel>8)throw new Error("Errorlevel must be between 0 and 8");s.push({type:"pdf417",property:"errorlevel",value:t.errorlevel,payload:[29,40,107,4,0,48,69,48,t.errorlevel+48]}),s.push({type:"pdf417",property:"truncated",value:!!t.truncated,payload:[29,40,107,3,0,48,70,t.truncated?1:0]});const a=o.encode(e,"ascii"),i=a.length+3;return s.push({type:"pdf417",property:"data",value:e,payload:[29,40,107,255&i,i>>8&255,48,80,48,...a]}),s.push({type:"pdf417",command:"print",payload:[29,40,107,3,0,48,81,48]}),s}image(e,t,s,o,a={}){const{supportsCompression:i=!1}=a;return t*s>25e4||t>800?this._processImageAsync(e,t,s,o,i):this._processImageSync(e,t,s,o,i)}_processImageSync(e,t,s,o,a){const n=[];if("raster"===o){const{strips:o}=i.pixelsToRasterStrips(e,t,s,i.IMAGE_STRIP_HEIGHT);for(const e of o){const s=i.buildRasterCommand(e.data,e.widthBytes,e.height,a);n.push({type:"image",command:"raster",value:"raster",width:t,height:e.height,compressed:s.compressed,compressionRatio:s.ratio,payload:s.command})}}else{const o=i.pixelsToColumns(e,t,s);n.push({type:"line-spacing",value:"24 dots",payload:[27,51,36]});for(const e of o){const s=i.buildColumnCommand(e,t);n.push({type:"image",property:"data",value:"column",width:t,height:24,payload:s})}n.push({type:"line-spacing",value:"default",payload:[27,50]})}return n}async _processImageAsync(e,t,s,o,a){const n=[];if("raster"===o){const{strips:o}=i.pixelsToRasterStrips(e,t,s,i.IMAGE_STRIP_HEIGHT);for(let e=0;e<o.length;e++){const s=o[e],r=i.buildRasterCommand(s.data,s.widthBytes,s.height,a);n.push({type:"image",command:"raster",value:"raster",width:t,height:s.height,compressed:r.compressed,compressionRatio:r.ratio,payload:r.command}),e%4==0&&e>0&&await new Promise(e=>setTimeout(e,0))}}else{const{commands:r}=await i.processImageAsync(e,t,s,o,{useCompression:a});for(let e=0;e<r.length;e++){const s=r[e];0===e?n.push({type:"line-spacing",value:"24 dots",payload:s}):e===r.length-1?n.push({type:"line-spacing",value:"default",payload:s}):n.push({type:"image",property:"data",value:"column",width:t,height:24,payload:s})}}return n}cut(e){let t=0;return"partial"==e&&(t=1),[{type:"cut",payload:[29,86,t]}]}pulse(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=100),void 0===s&&(s=500),[{type:"pulse",payload:[27,112,e?1:0,255&(t=Math.min(500,Math.round(t/2))),255&(s=Math.min(500,Math.round(s/2)))]}]}bold(e){let t=0;return e&&(t=1),[27,69,t]}underline(e){let t=0;return e&&(t=1),[27,45,t]}italic(e){let t=0;return e&&(t=1),[27,52,t]}invert(e){let t=0;return e&&(t=1),[29,66,t]}size(e,t){return[29,33,t-1|e-1<<4]}codepage(e){return[27,116,e]}flush(){return[]}}class r{initialize(){return[{type:"initialize",payload:[27,64,24]}]}font(e){let t=0;return"B"===e&&(t=1),"C"===e&&(t=2),[{type:"font",value:e,payload:[27,30,70,t]}]}align(e){let t=0;return"center"===e?t=1:"right"===e&&(t=2),[{type:"align",value:e,payload:[27,29,97,t]}]}barcode(e,t,s){const a=[],i={upce:0,upca:1,ean8:2,ean13:3,code39:4,itf:5,"interleaved-2-of-5":5,code128:6,code93:7,"nw-7":8,codabar:8,"gs1-128":9,"gs1-databar-omni":10,"gs1-databar-truncated":11,"gs1-databar-limited":12,"gs1-databar-expanded":13};if("string"==typeof t&&void 0===i[t])throw new Error(`Symbology '${t}' not supported by language`);if(s.width<1||s.width>3)throw new Error("Width must be between 1 and 3");"code128"===t&&e.startsWith("{")&&(e=e.slice(2));const n=o.encode(e,"ascii"),r="string"==typeof t?i[t]:t;return a.push({type:"barcode",value:{symbology:t,data:e,width:s.width,height:s.height,text:s.text},payload:[27,98,r,s.text?2:1,s.width,s.height,...n,30]}),a}qrcode(e,t){const s=[],a={1:1,2:2};if(!(t.model in a))throw new Error("Model must be 1 or 2");if(s.push({type:"qrcode",property:"model",value:t.model,payload:[27,29,121,83,48,a[t.model]]}),"number"!=typeof t.size)throw new Error("Size must be a number");if(t.size<1||t.size>8)throw new Error("Size must be between 1 and 8");s.push({type:"qrcode",property:"size",value:t.size,payload:[27,29,121,83,50,t.size]});const i={l:0,m:1,q:2,h:3};if(!(t.errorlevel in i))throw new Error("Error level must be l, m, q or h");s.push({type:"qrcode",property:"errorlevel",value:t.errorlevel,payload:[27,29,121,83,49,i[t.errorlevel]]});const n=o.encode(e,"iso8859-1"),r=n.length;return s.push({type:"qrcode",property:"data",value:e,payload:[27,29,121,68,49,0,255&r,r>>8&255,...n]}),s.push({type:"qrcode",command:"print",payload:[27,29,121,80]}),s}pdf417(e,t){const s=[];if("number"!=typeof t.columns)throw new Error("Columns must be a number");if(0!==t.columns&&(t.columns<1||t.columns>30))throw new Error("Columns must be 0, or between 1 and 30");if("number"!=typeof t.rows)throw new Error("Rows must be a number");if(0!==t.rows&&(t.rows<3||t.rows>90))throw new Error("Rows must be 0, or between 3 and 90");if(s.push({type:"pdf417",value:`rows: ${t.rows}, columns: ${t.columns}`,payload:[27,29,120,83,48,1,t.rows,t.columns]}),"number"!=typeof t.width)throw new Error("Width must be a number");if(t.width<2||t.width>8)throw new Error("Width must be between 2 and 8");if(s.push({type:"pdf417",property:"width",value:t.width,payload:[27,29,120,83,50,t.width]}),"number"!=typeof t.height)throw new Error("Height must be a number");if(t.height<2||t.height>8)throw new Error("Height must be between 2 and 8");if(s.push({type:"pdf417",property:"height",value:t.height,payload:[27,29,120,83,51,t.height]}),"number"!=typeof t.errorlevel)throw new Error("Errorlevel must be a number");if(t.errorlevel<0||t.errorlevel>8)throw new Error("Errorlevel must be between 0 and 8");s.push({type:"pdf417",property:"errorlevel",value:t.errorlevel,payload:[27,29,120,83,49,t.errorlevel]});const a=o.encode(e,"ascii"),i=a.length;return s.push({type:"pdf417",property:"data",value:e,payload:[27,29,120,68,255&i,i>>8&255,...a]}),s.push({type:"pdf417",command:"print",payload:[27,29,120,80]}),s}image(e,t,s,o={}){const a=t*s,i=t*Math.ceil(s/24)*3;return a>25e4||t>800||i>5e5?this._processImageAsync(e,t,s):this._processImageSync(e,t,s)}_processImageSync(e,t,s){const o=[],a=i.pixelsToColumns(e,t,s);for(const e of a){const s=i.buildStarColumnCommand(e,t);o.push({type:"image",property:"data",value:"column",width:t,height:24,payload:s})}return o}async _processImageAsync(e,t,s){const o=[],a=Math.ceil(s/24);for(let n=0;n<a;n++){const a=24*n,r=new Uint8Array(3*t);for(let o=0;o<t;o++){const n=3*o;for(let p=0;p<3;p++){let d=0;for(let n=0;n<8;n++)d|=i.getPixel(e,o,a+8*p+n,t,s)<<7-n;r[n+p]=d}o%100==0&&o>0&&await new Promise(e=>setTimeout(e,0))}const p=i.buildStarColumnCommand(r,t);o.push({type:"image",property:"data",value:"column",width:t,height:24,payload:p})}return o}cut(e){let t=0;return"partial"==e&&(t=1),[{type:"cut",payload:[27,100,t]}]}pulse(e,t,s){return void 0===e&&(e=0),void 0===t&&(t=200),void 0===s&&(s=200),[{type:"pulse",payload:[27,7,255&(t=Math.min(127,Math.round(t/10))),255&(s=Math.min(127,Math.round(s/10))),e?26:7]}]}bold(e){let t=70;return e&&(t=69),[27,t]}underline(e){let t=0;return e&&(t=1),[27,45,t]}italic(e){return[]}invert(e){let t=53;return e&&(t=52),[27,t]}size(e,t){return[27,105,t-1,e-1]}codepage(e){return[27,29,116,e]}flush(){return[{type:"print-mode",value:"page",payload:[27,29,80,48]},{type:"print-mode",value:"line",payload:[27,29,80,49]}]}}class p{#i={bold:!1,italic:!1,underline:!1,invert:!1,width:1,height:1};#n;#r;constructor(e){this.#n=structuredClone(this.#i),this.#r=e.callback||(()=>{})}store(){const e=[],t=new Map;for(const e in this.#n)this.#n[e]!==this.#i[e]&&("width"===e||"height"===e?t.set("size",{width:this.#i.width,height:this.#i.height}):t.set(e,this.#i[e]));for(const s of t)e.push({type:"style",property:s[0],value:s[1]});return e}restore(){const e=[],t=new Map;for(const e in this.#n)this.#n[e]!==this.#i[e]&&("width"===e||"height"===e?t.set("size",{width:this.#n.width,height:this.#n.height}):t.set(e,this.#n[e]));for(const s of t)e.push({type:"style",property:s[0],value:s[1]});return e}set bold(e){e!==this.#n.bold&&(this.#n.bold=e,this.#r({type:"style",property:"bold",value:e}))}get bold(){return this.#n.bold}set italic(e){e!==this.#n.italic&&(this.#n.italic=e,this.#r({type:"style",property:"italic",value:e}))}get italic(){return this.#n.italic}set underline(e){e!==this.#n.underline&&(this.#n.underline=e,this.#r({type:"style",property:"underline",value:e}))}get underline(){return this.#n.underline}set invert(e){e!==this.#n.invert&&(this.#n.invert=e,this.#r({type:"style",property:"invert",value:e}))}get invert(){return this.#n.invert}set width(e){e!==this.#n.width&&(this.#n.width=e,this.#r({type:"style",property:"size",value:{width:this.#n.width,height:this.#n.height}}))}get width(){return this.#n.width}set height(e){e!==this.#n.height&&(this.#n.height=e,this.#r({type:"style",property:"size",value:{width:this.#n.width,height:this.#n.height}}))}get height(){return this.#n.height}}class d{static wrap(e,t){const s=[];let o=[],a=t.indent||0;const i=t.width||1,n=t.columns||42,r=String(e).split(/\r\n|\n/g);for(const e of r){const t=e.match(/[^\s-]+?-\b|\S+|\s+|\r\n?|\n/g)||["~~empty~~"];for(const e of t)if("~~empty~~"!==e){if(a+e.length*i>n){if(e.length*i>n){const t=n-a,r=e.split("");let p;const d=[];for(t>8*i&&(p=r.splice(0,Math.floor(t/i)).join(""),o.push(p),s.push(o),o=[],a=0);(p=r.splice(0,Math.floor(n/i))).length;)d.push(p.join(""));for(const e of d)a+e.length*i>n&&(s.push(o),o=[],a=0),o.push(e),a+=e.length*i;continue}s.push(o),o=[],a=0}o.push(e),a+=e.length*i}else s.push(o),o=[],a=0;o.length>0&&(s.push(o),o=[],a=0)}for(let e=0;e<s.length;e++)s[e]=s[e].join(""),e<s.length-1&&(s[e]=s[e].trimEnd());return s}}class c{#p;#d;#c;#r;#l=0;#u;#h=[];constructor(e){this.#p=e.embedded||!1,this.#d=e.columns||42,this.#c=e.align||"left",this.#r=e.callback||(()=>{}),this.style=new p({callback:e=>{this.add(e,0)}}),this.#u=this.style.store()}text(e,t){const s=d.wrap(e,{columns:this.#d,width:this.style.width,indent:this.#l});for(let e=0;e<s.length;e++)s[e].length?(this.add({type:"text",value:s[e],codepage:t},s[e].length*this.style.width),e<s.length-1&&this.flush()):this.flush({forceNewline:!0})}space(e){this.add({type:"space",size:e},e)}raw(e,t){this.add({type:"raw",payload:e},t||0)}add(e,t){if(e instanceof Array){for(const t of e)this.add(t);this.#l+=t||0}else(t=t||0)+this.#l>this.#d&&this.flush(),this.#l+=t,this.#h=this.#h.concat(e)}end(){this.#l=this.#d}fetch(e){if(0===this.#l&&!e.forceNewline&&!e.forceFlush)return[];const t={current:this.#c,next:null};for(let e=0;e<this.#h.length-1;e++)"align"!==this.#h[e].type||this.#h[e].payload||(t.current=this.#h[e].value);if(this.#h.length){const e=this.#h[this.#h.length-1];"align"!==e.type||e.payload||(t.next=e.value)}this.#c=t.current;const s=this.#h.filter(e=>"align"!==e.type||e.payload);let o=[];const a=this.style.restore(),i=this.style.store();if(0!==this.#l||!e.ignoreAlignment&&this.#p){if("right"===this.#c){let e;for(let t=s.length-1;t>=0;t--)if("text"===s[t].type||"space"===s[t].type){e=t;break}"number"==typeof e&&("space"===s[e].type&&s[e].size>this.style.width&&(s[e].size-=this.style.width,this.#l-=this.style.width),"text"===s[e].type&&s[e].value.endsWith(" ")&&(s[e].value=s[e].value.slice(0,-1),this.#l-=this.style.width)),o=this.#g([{type:"space",size:this.#d-this.#l},...this.#u,...s,...i])}if("center"===this.#c){const e=this.#d-this.#l>>1;o=this.#g([{type:"space",size:e},...this.#u,...s,...i,{type:"space",size:this.#p?this.#d-this.#l-e:0}])}"left"===this.#c&&(o=this.#g([...this.#u,...s,...i,{type:"space",size:this.#p?this.#d-this.#l:0}]))}else o=this.#g([...this.#u,...s,...i]);return this.#u=a,this.#h=[],this.#l=0,0===o.length&&e.forceNewline&&o.push({type:"empty"}),t.next&&(this.#c=t.next),o}flush(e){e=Object.assign({forceNewline:!1,forceFlush:!1,ignoreAlignment:!1},e||{});const t=this.fetch(e);t.length&&this.#r(t)}#g(e){const t=[];let s=-1;for(let o of e){if("space"===o.type){if(0===o.size)continue;o={type:"text",value:" ".repeat(o.size),codepage:null}}if("text"===o.type){if(s>=0&&"text"===t[s].type&&(t[s].codepage===o.codepage||null===t[s].codepage||null===o.codepage)){t[s].value+=o.value,t[s].codepage=t[s].codepage||o.codepage;continue}t.push(o),s++}else if("style"===o.type&&"size"===o.property){if(s>=0&&"style"===t[s].type&&"size"===t[s].property){t[s].value=o.value;continue}t.push(o),s++}else t.push(o),s++}return t}get cursor(){return this.#l}set align(e){this.add({type:"align",value:e},0)}get align(){let e=this.#c;for(let t=0;t<this.#h.length;t++)"align"===this.#h[t].type&&(e=this.#h[t].value);return e}set columns(e){this.#d=e}get columns(){return this.#d}}const l={"esc-pos":{"bixolon/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],bixolon:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858",,"cp862","cp864","thai42","windows1253","windows1254","windows1257",,"windows1251","cp737","cp775","thai14","bixolon/hebrew","windows1255","thai11","thai18","cp885","cp857","iso8859-7","thai16","windows1256","windows1258","khmer",,,,"bixolon/cp866","windows1250",,"tcvn3","tcvn3capitals","viscii"],citizen:["cp437","epson/katakana","cp858","cp860","cp863","cp865","cp852","cp866","cp857",,,,,,,,"windows1252",,,,,"thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","windows1258",,,,,,,,"cp864"],"epson/legacy":["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858"],epson:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,"cp851","cp853","cp857","cp737","iso8859-7","windows1252","cp866","cp852","cp858","thai42","thai11",,,,,"thai13",,,,"tcvn3","tcvn3capitals","cp720","cp775","cp855","cp861","cp862","cp864","cp869","epson/iso8859-2","iso8859-15","cp1098","cp774","cp772","cp1125","windows1250","windows1251","windows1253","windows1254","windows1255","windows1256","windows1257","windows1258","rk1048"],fujitsu:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,"cp857",,,,,,,,"windows1252","cp866","cp852","cp858",,,,,,,"thai13",,,,,,,,,,,,,,"cp864"],hp:["cp437","cp850","cp852","cp860","cp863","cp865","cp858","cp866","windows1252","cp862","cp737","cp874","cp857","windows1251","windows1255","rk1048"],metapace:["cp437","epson/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,,,,"cp858"],mpt:["cp437",,"cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012"],"pos-5890":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1",,"cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,,,"windows1251","cp737","windows1257",,"windows1258","cp864",,,,"windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,"cp3041","windows1253","windows1254","windows1256","cp720",,"cp775"],"pos-8360":["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","cp862",,,,,,,,"windows1252","cp866","cp852","cp858",,"latvian",,"windows1251","cp737","windows1257",,"windows1258","cp864",,,"pos8360/hebrew","windows1255",,,,,,,,,,,,,,,,,,,,,,,,"cp861",,,,"cp855","cp857",,,,"cp851","cp869",,"cp772","cp774",,,"windows1250",,"cp3840",,"cp3843","cp3844","cp3845","cp3846","cp3847","cp3848",,"cp771","cp3001","cp3002","cp3011","cp3012",,,,"windows1254","windows1256","cp720",,"cp775"],star:["cp437","star/katakana","cp850","cp860","cp863","cp865",,,,,,,,,,,"windows1252","cp866","cp852","cp858","thai42","thai11","thai13","thai14","thai16",,"thai18"],xprinter:["cp437","epson/katakana","cp850","cp860","cp863","cp865","iso8859-1","windows1253","xprinter/hebrew","cp3012",,"windows1255",,,,,"windows1252","cp866","cp852","cp858",,"latvian","cp864","windows1251","cp737","windows1257",,,,,,,,"windows1256"],youku:["cp437","epson/katakana","cp850","cp860","cp863","cp865","windows1251","cp866","cp3021","cp3012",,,,,,"cp862","windows1252",,"cp852","cp858",,,"cp864","iso8859-1","cp737","windows1257",,,"cp855","cp857","windows1250","cp775","windows1254","windows1255","windows1256","windows1258",,,"iso8859-1",,,,,,"iso8859-15",,,"cp874"]},"star-prnt":{star:["star/standard","cp437","star/katakana",,"cp858","cp852","cp860","cp861","cp863","cp865","cp866","cp855","cp857","cp862","cp864","cp737","cp851","cp869","star/cp928","cp772","cp774","star/cp874",,,,,,,,,,,"windows1252","windows1250","windows1251",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"cp3840","cp3841","cp3843","cp3844","cp3845","cp3846","cp3847","cp3848","cp1001","cp771","cp3001","cp3002","cp3011","cp3012","cp3021","cp3041"]}};l["star-line"]=l["star-prnt"],l["esc-pos"].zijang=l["esc-pos"]["pos-5890"];const u={"bixolon-srp350":{vendor:"Bixolon",model:"SRP-350",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4},images:{supportsCompression:!1}}},"bixolon-srp350iii":{vendor:"Bixolon",model:"SRP-350III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"bixolon",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56},C:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"citizen-ct-s310ii":{vendor:"Citizen",model:"CT-S310II",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"citizen",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64},C:{size:"8x16",columns:72}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!0}}},"epson-tm-m30ii":{vendor:"Epson",model:"TM-m30II",interfaces:{usb:{productName:"TM-m30II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-m30iii":{vendor:"Epson",model:"TM-m30III",interfaces:{usb:{productName:"TM-m30III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"10x24",columns:57},C:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-p20ii":{vendor:"Epson",model:"TM-P20II",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42},D:{size:"10x24",columns:38},E:{size:"8x16",columns:48}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster",supportsCompression:!0},cutter:{feed:3}}},"epson-tm-t20ii":{vendor:"Epson",model:"TM-T20II",interfaces:{usb:{productName:"TM-T20II"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"epson-tm-t20iii":{vendor:"Epson",model:"TM-T20III",interfaces:{usb:{productName:"TM-T20III"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-t20iv":{vendor:"Epson",model:"TM-T20IV",interfaces:{usb:{productName:"TM-T20IV"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-t70":{vendor:"Epson",model:"TM-T70",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster",supportsCompression:!1},cutter:{feed:4}}},"epson-tm-t70ii":{vendor:"Epson",model:"TM-T70II",interface:{usb:{productName:"TM-T70II"}},media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},images:{mode:"raster",supportsCompression:!0},cutter:{feed:4}}},"epson-tm-t88ii":{vendor:"Epson",model:"TM-T88II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"epson-tm-t88iii":{vendor:"Epson",model:"TM-T88III",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"epson-tm-t88iv":{vendor:"Epson",model:"TM-T88IV",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson/legacy",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"epson-tm-t88v":{vendor:"Epson",model:"TM-T88V",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-t88vi":{vendor:"Epson",model:"TM-T88VI",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"epson-tm-t88vii":{vendor:"Epson",model:"TM-T88VII",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"epson",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded","code128-auto"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!0}}},"fujitsu-fp1000":{vendor:"Fujitsu",model:"FP-1000",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"fujitsu",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:56},C:{size:"8x16",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1},cutter:{feed:4},images:{supportsCompression:!0}}},"hp-a779":{vendor:"HP",model:"A779",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"hp",newline:"\n",fonts:{A:{size:"12x24",columns:44}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!1,fallback:{type:"barcode",symbology:75}},cutter:{feed:4},images:{supportsCompression:!0}}},"metapace-t1":{vendor:"Metapace",model:"T-1",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"metapace",fonts:{A:{size:"12x24",columns:42},B:{size:"9x17",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:4},images:{supportsCompression:!1}}},"mpt-ii":{vendor:"",model:"MPT-II",media:{dpi:180,width:80},capabilities:{language:"esc-pos",codepages:"mpt",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64},C:{size:"0x0",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:[]},pdf417:{supported:!1},images:{supportsCompression:!1}}},"pos-5890":{vendor:"",model:"POS-5890",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"pos-5890",fonts:{A:{size:"12x24",columns:32},B:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster",supportsCompression:!1},cutter:{feed:1}}},"pos-8360":{vendor:"",model:"POS-8360",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"pos-8360",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{mode:"raster",supportsCompression:!1},cutter:{feed:4}}},"star-mc-print2":{vendor:"Star",model:"mC-Print2",interfaces:{usb:{productName:"mC-Print2"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!1}}},"star-mpop":{vendor:"Star",model:"mPOP",interfaces:{usb:{productName:"mPOP"}},media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!1}}},"star-sm-l200":{vendor:"Star",model:"SM-L200",media:{dpi:203,width:58},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42},C:{size:"9x17",columns:42}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},images:{supportsCompression:!1}}},"star-tsp100iii":{vendor:"Star",model:"TSP100III",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!1}}},"star-tsp100iv":{vendor:"Star",model:"TSP100IV",media:{dpi:203,width:80},capabilities:{language:"star-prnt",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!1}}},"star-tsp650":{vendor:"Star",model:"TSP650",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!1,models:[]},pdf417:{supported:!1},cutter:{feed:3},images:{supportsCompression:!1}}},"star-tsp650ii":{vendor:"Star",model:"TSP650II",media:{dpi:203,width:80},capabilities:{language:"star-line",codepages:"star",fonts:{A:{size:"12x24",columns:48},B:{size:"9x24",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0},cutter:{feed:3},images:{supportsCompression:!1}}},"xprinter-xp-n160ii":{vendor:"Xprinter",model:"XP-N160II",interfaces:{usb:{productName:"Printer-80\0"}},media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"xprinter-xp-t80q":{vendor:"Xprinter",model:"XP-T80Q",media:{dpi:203,width:80},capabilities:{language:"esc-pos",codepages:"xprinter",fonts:{A:{size:"12x24",columns:48},B:{size:"9x17",columns:64}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!0},cutter:{feed:4},images:{supportsCompression:!1}}},"youku-58t":{vendor:"Youku",model:"58T",media:{dpi:203,width:58},capabilities:{language:"esc-pos",codepages:"youku",fonts:{A:{size:"12x24",columns:32},B:{size:"9x24",columns:42}},barcodes:{supported:!0,symbologies:["upca","ean13","ean8","code39","itf","codabar","code93","code128"]},qrcode:{supported:!0,models:["2"]},pdf417:{supported:!1},images:{supportsCompression:!1}}}};class h{#m={};#f=[];#b;#w;#y={fonts:{A:{size:"12x24",columns:42},B:{size:"9x24",columns:56}},barcodes:{supported:!0,symbologies:["upca","upce","ean13","ean8","code39","itf","codabar","code93","code128","gs1-databar-omni","gs1-databar-truncated","gs1-databar-limited","gs1-databar-expanded"]},qrcode:{supported:!0,models:["1","2"]},pdf417:{supported:!0}};#v={};#x=[];#z="cp437";#C={codepage:0,font:"A"};constructor(e){const t={columns:42,language:"esc-pos",imageMode:"column",feedBeforeCut:0,newline:"\n\r",codepageMapping:"epson",codepageCandidates:null,errors:"relaxed"};if("string"==typeof(e=e||{}).language&&(t.columns="esc-pos"===e.language?42:48,t.codepageMapping="esc-pos"===e.language?"epson":"star"),"string"==typeof e.printerModel){if(void 0===u[e.printerModel])throw new Error("Unknown printer model");this.#y=u[e.printerModel].capabilities,t.columns=this.#y.fonts.A.columns,t.language=this.#y.language,t.codepageMapping=this.#y.codepages,t.newline=this.#y?.newline||t.newline,t.feedBeforeCut=this.#y?.cutter?.feed||t.feedBeforeCut,t.imageMode=this.#y?.images?.mode||t.imageMode}if(e&&(this.#m=Object.assign(t,{debug:!1,embedded:!1,createCanvas:null},e)),this.#m.width&&(this.#m.columns=this.#m.width),"esc-pos"===this.#m.language)this.#b=new n;else{if("star-prnt"!==this.#m.language&&"star-line"!==this.#m.language)throw new Error("The specified language is not supported");this.#b=new r}if(void 0===this.#m.autoFlush&&(this.#m.autoFlush=!this.#m.embedded&&"star-prnt"==this.#m.language),![32,35,42,44,48].includes(this.#m.columns)&&!this.#m.embedded)throw new Error("The width of the paper must me either 32, 35, 42, 44 or 48 columns");if("string"==typeof this.#m.codepageMapping){if(void 0===l[this.#m.language][this.#m.codepageMapping])throw new Error("Unknown codepage mapping");this.#v=Object.fromEntries(l[this.#m.language][this.#m.codepageMapping].map((e,t)=>[e,t]).filter(e=>e))}else this.#v=this.#m.codepageMapping;this.#m.codepageCandidates?this.#x=this.#m.codepageCandidates:this.#x=Object.keys(this.#v),this.#w=new c({embedded:this.#m.embedded,columns:this.#m.columns,align:"left",size:1,callback:e=>this.#f.push(e)}),this.#E()}#E(){this.#f=[],this.#z="esc-pos"==this.#m.language?"cp437":"star/standard",this.#C.codepage=-1,this.#C.font="A"}initialize(){if(this.#m.embedded)throw new Error("Initialize is not supported in table cells or boxes");return this.#w.add(this.#b.initialize()),this}codepage(e){if("auto"===e)return this.#z=e,this;if(!o.supports(e))throw new Error("Unknown codepage");if(void 0===this.#v[e])throw new Error("Codepage not supported by printer");return this.#z=e,this}text(e){return this.#w.text(e,this.#z),this}newline(e){e=parseInt(e,10)||1;for(let t=0;t<e;t++)this.#w.flush({forceNewline:!0});return this}line(e){return this.text(e),this.newline(),this}underline(e){return this.#w.style.underline=void 0===e?!this.#w.style.underline:e,this}italic(e){return this.#w.style.italic=void 0===e?!this.#w.style.italic:e,this}bold(e){return this.#w.style.bold=void 0===e?!this.#w.style.bold:e,this}invert(e){return this.#w.style.invert=void 0===e?!this.#w.style.invert:e,this}width(e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Width must be a number");if(e<1||e>8)throw new Error("Width must be between 1 and 8");return this.#w.style.width=e,this}height(e){if(void 0===e&&(e=1),"number"!=typeof e)throw new Error("Height must be a number");if(e<1||e>8)throw new Error("Height must be between 1 and 8");return this.#w.style.height=e,this}size(e,t){return"string"==typeof e?this.font("small"===e?"B":"A"):(void 0===t&&(t=e),this.width(e),this.height(t),this)}font(e){if(this.#m.embedded)throw new Error("Changing fonts is not supported in table cells or boxes");if(this.#w.cursor>0)throw new Error("Changing fonts is not supported in the middle of a line");const t=e.match(/^[0-9]+x[0-9]+$/);return t&&(e=Object.entries(this.#y.fonts).find(e=>e[1].size==t[0])[0]),e=e.toUpperCase(),void 0===this.#y.fonts[e]?this.#k("This font is not supported by this printer","relaxed"):(this.#w.add(this.#b.font(e)),this.#C.font=e,this.#w.columns="A"===e?this.#m.columns:this.#m.columns/this.#y.fonts.A.columns*this.#y.fonts[e].columns,this)}align(e){if(!["left","center","right"].includes(e))throw new Error("Unknown alignment");return this.#w.align=e,this}table(e,t){this.#w.flush();for(let s=0;s<t.length;s++){const o=[];let a=0;for(let i=0;i<e.length;i++){const n=new h(Object.assign({},this.#m,{width:e[i].width,embedded:!0}));n.codepage(this.#z),n.align(e[i].align),"string"==typeof t[s][i]&&n.text(t[s][i]),"function"==typeof t[s][i]&&t[s][i](n);const r=n.commands();a=Math.max(a,r.length),o[i]=r}for(let t=0;t<e.length;t++)if(!(o[t].length>=a))for(let s=o[t].length;s<a;s++){let s="top";void 0!==e[t].verticalAlign&&(s=e[t].verticalAlign);const a={commands:[{type:"space",size:e[t].width}],height:1};"bottom"==s?o[t].unshift(a):o[t].push(a)}for(let t=0;t<a;t++){for(let s=0;s<e.length;s++)void 0!==e[s].marginLeft&&this.#w.space(e[s].marginLeft),this.#w.add(o[s][t].commands,e[s].width),void 0!==e[s].marginRight&&this.#w.space(e[s].marginRight);this.#w.flush()}}return this}rule(e){return e=Object.assign({style:"single",width:this.#m.columns||10},e||{}),this.#w.flush(),this.#w.text(("double"===e.style?"═":"─").repeat(e.width),"cp437"),this.#w.flush({forceNewline:!0}),this}box(e,t){if((e=Object.assign({style:"single",width:this.#m.columns,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},e||{})).width+e.marginLeft+e.marginRight>this.#m.columns)throw new Error("Box is too wide");let s;"single"==e.style?s=["┌","┐","└","┘","─","│"]:"double"==e.style&&(s=["╔","╗","╚","╝","═","║"]);const o=new h(Object.assign({},this.#m,{width:e.width-("none"==e.style?0:2)-e.paddingLeft-e.paddingRight,embedded:!0}));o.codepage(this.#z),o.align(e.align),"function"==typeof t&&t(o),"string"==typeof t&&o.text(t);const a=o.commands();this.#w.flush(),"none"!=e.style&&(this.#w.space(e.marginLeft),this.#w.text(s[0],"cp437"),this.#w.text(s[4].repeat(e.width-2),"cp437"),this.#w.text(s[1],"cp437"),this.#w.space(e.marginRight),this.#w.flush());for(let t=0;t<a.length;t++)this.#w.space(e.marginLeft),"none"!=e.style&&(this.#w.style.height=a[t].height,this.#w.text(s[5],"cp437"),this.#w.style.height=1),this.#w.space(e.paddingLeft),this.#w.add(a[t].commands,e.width-("none"==e.style?0:2)-e.paddingLeft-e.paddingRight),this.#w.space(e.paddingRight),"none"!=e.style&&(this.#w.style.height=a[t].height,this.#w.text(s[5],"cp437"),this.#w.style.height=1),this.#w.space(e.marginRight),this.#w.flush();return"none"!=e.style&&(this.#w.space(e.marginLeft),this.#w.text(s[2],"cp437"),this.#w.text(s[4].repeat(e.width-2),"cp437"),this.#w.text(s[3],"cp437"),this.#w.space(e.marginRight),this.#w.flush()),this}barcode(e,t,s){let o={height:60,width:2,text:!1};if("object"==typeof s&&(o=Object.assign(o,s)),"number"==typeof s&&(o.height=s),this.#m.embedded)throw new Error("Barcodes are not supported in table cells or boxes");return!1===this.#y.barcodes.supported?this.#k("Barcodes are not supported by this printer","relaxed"):"string"!=typeof t||this.#y.barcodes.symbologies.includes(t)?(this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#w.align&&this.#w.add(this.#b.align(this.#w.align)),this.#w.add(this.#b.barcode(e,t,o)),"left"!==this.#w.align&&this.#w.add(this.#b.align("left")),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this):this.#k(`Symbology '${t}' not supported by this printer`,"relaxed")}qrcode(e,t,s,o){let a={model:2,size:6,errorlevel:"m"};if("object"==typeof t&&(a=Object.assign(a,t)),"number"==typeof t&&(a.model=t),"number"==typeof s&&(a.size=s),"string"==typeof o&&(a.errorlevel=o),this.#m.embedded)throw new Error("QR codes are not supported in table cells or boxes");return!1===this.#y.qrcode.supported?this.#k("QR codes are not supported by this printer","relaxed"):a.model&&!this.#y.qrcode.models.includes(String(a.model))?this.#k("QR code model is not supported by this printer","relaxed"):(this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#w.align&&this.#w.add(this.#b.align(this.#w.align)),this.#w.add(this.#b.qrcode(e,a)),"left"!==this.#w.align&&this.#w.add(this.#b.align("left")),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this)}pdf417(e,t){if(t=Object.assign({width:3,height:3,columns:0,rows:0,errorlevel:1,truncated:!1},t||{}),this.#m.embedded)throw new Error("PDF417 codes are not supported in table cells or boxes");return!1===this.#y.pdf417.supported?"object"==typeof this.#y.pdf417.fallback?this.barcode(e,this.#y.pdf417.fallback.symbology):this.#k("PDF417 codes are not supported by this printer","relaxed"):(this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#w.align&&this.#w.add(this.#b.align(this.#w.align)),this.#w.add(this.#b.pdf417(e,t)),"left"!==this.#w.align&&this.#w.add(this.#b.align("left")),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this)}async image(e,t,s){if(this.#m.embedded)throw new Error("Images are not supported in table cells or boxes");if(!e||!e.data||"number"!=typeof e.width||"number"!=typeof e.height)throw new Error("Invalid image input: must have data, width, and height properties");const o={data:e.data,height:e.height,width:e.width,colorSpace:e.colorSpace,pixelFormat:e.pixelFormat};this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),"left"!==this.#w.align&&this.#w.add(this.#b.align(this.#w.align));const a=this.#y?.images?.supportsCompression??!1,i=this.#b.image(o,t,s,this.#m.imageMode,{supportsCompression:a}),n=await Promise.resolve(i);return this.#w.add(n),"left"!==this.#w.align&&this.#w.add(this.#b.align("left")),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this}cut(e){if(this.#m.embedded)throw new Error("Cut is not supported in table cells or boxes");for(let e=0;e<this.#m.feedBeforeCut;e++)this.#w.flush({forceNewline:!0});return this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this.#w.add(this.#b.cut(e)),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this}pulse(e,t,s){if(this.#m.embedded)throw new Error("Pulse is not supported in table cells or boxes");return this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this.#w.add(this.#b.pulse(e,t,s)),this.#w.flush({forceFlush:!0,ignoreAlignment:!0}),this}raw(e){return this.#w.raw(e),this}#A(e,t){return"bold"===e?this.#b.bold(t):"underline"===e?this.#b.underline(t):"italic"===e?this.#b.italic(t):"invert"===e?this.#b.invert(t):"size"===e?this.#b.size(t.width,t.height):void 0}#I(e,t){if(null===t){return[{type:"text",payload:[...o.encode(e,"ascii")]}]}if("auto"!==t){const s=o.encode(e,t);return this.#C.codepage!=this.#v[t]?(this.#C.codepage=this.#v[t],[{type:"codepage",payload:this.#b.codepage(this.#v[t])},{type:"text",payload:[...s]}]):[{type:"text",payload:[...s]}]}const s=o.autoEncode(e,this.#x),a=[];for(const e of s)this.#C.codepage=this.#v[e.codepage],a.push({type:"codepage",payload:this.#b.codepage(this.#v[e.codepage])},{type:"text",payload:[...e.bytes]});return a}commands(){let e=!0;const t=this.#f[this.#f.length-1];if(t){const s=t[t.length-1];s&&["pulse","cut"].includes(s.type)&&(e=!1)}e&&this.#m.autoFlush&&!this.#m.embedded&&this.#w.add(this.#b.flush());const s=[],o=this.#w.fetch({forceFlush:!0,ignoreAlignment:!0});for(o.length&&this.#f.push(o);this.#f.length;){const e=this.#f.shift(),t=e.filter(e=>"style"===e.type&&"size"===e.property).map(e=>e.value.height).reduce((e,t)=>Math.max(e,t),1);this.#m.debug&&console.log("|"+e.filter(e=>"text"===e.type).map(e=>e.value).join("")+"|",t),s.push({commands:e,height:t})}return this.#m.debug&&console.log("commands",s),this.#E(),s}encode(e){const t=this.commands();if("commands"===e)return t;const s=[];for(const e of t){const t=[];for(const s of e.commands)"text"===s.type?t.push(...this.#I(s.value,s.codepage)):"style"===s.type?t.push(Object.assign(s,{payload:this.#A(s.property,s.value)})):(s.value||s.payload)&&t.push(s);s.push(t)}if("lines"===e)return s;let o=0,a=null;const i="\n\r"===this.#m.newline?2:"\n"===this.#m.newline?1:0;for(const e of s){for(const t of e)t.payload&&(o+=t.payload.length),a=t;o+=i}const n=new Uint8Array(o);let r=0;for(const e of s){for(const t of e){if(t.payload)if(t.payload instanceof Uint8Array)n.set(t.payload,r),r+=t.payload.length;else for(let e=0;e<t.payload.length;e++)n[r++]=t.payload[e];a=t}"\n\r"===this.#m.newline?(n[r++]=10,n[r++]=13):"\n"===this.#m.newline&&(n[r++]=10)}return a&&"pulse"===a.type?n.subarray(0,r-i):n.subarray(0,r)}async*encodeAsyncIterator(e={}){const{chunkSize:t=i.DEFAULT_CHUNK_SIZE,onChunkSent:s}=e,o=this.encode();if(0===o.length)return;const a=i.generateChunks(o,t);for(const e of a)if(yield e.chunk,s){const t={index:e.index,total:e.total,bytes:e.chunk.length,bytesSent:e.byteOffset+e.chunk.length,totalBytes:e.totalBytes,isLast:e.isLast};await Promise.resolve(s(t))}}#k(e,t){if("strict"===t||"strict"===this.#m.errors)throw new Error(e);return console.warn(e),this}static get printerModels(){return Object.entries(u).map(e=>({id:e[0],name:e[1].vendor+" "+e[1].model}))}get columns(){return this.#w.columns}get language(){return this.#m.language}get printerCapabilities(){return this.#y}}return h});
//# sourceMappingURL=receipt-printer-encoder.umd.js.map
